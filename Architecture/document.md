好的文档应该有以下几个明确定义的要素：

- Why 为什么要写这篇技术文档
- Who 文档的读者是谁
- What 技术文档的用途是什么
- When 创建、Review 和更新的日期
- Where 放在哪、版本是多少

技术负责人需要了解业务需求，按如下步骤组织编写：

1. 了解业务需求和现有系统架构，按架构原则整理项目架构相关文档(设计文档、评审文档)
2. 完成架构相关考虑后，按需求对项目拆分功能模块，并**对每个模块标注必须设计点**
3. 将功能模块分配到人，组织相关人员编写所有功能模块的详细设计
4. **验收每个模块的详细设计是否达标**(保证技术评审时的有效性)
5. 所有模块详细设计完成后组织技术评审

- [架构设计文档](#架构设计文档)
  - [编写原则](#编写原则)
    - [架构层面](#架构层面)
    - [设计层面](#设计层面)
    - [大体内容](#大体内容)
  - [模板](#模板)
- [详细设计方案文档](#详细设计方案文档)
  - [模板](#模板-1)
- [架构评审文档](#架构评审文档)

## 架构设计文档

### 编写原则

#### 架构层面

1. 项目架构描述：如果是迭代项目，现有项目架构情况需要描述清楚，可以链接到固定的项目架构文档，不用每次都写
2. 路由规划：相关功能的路由调用链路，域名、nginx、gateway、微服务链路
3. 安全规划：内外网功能划分，鉴权、反黑产等
4. 性能&可用性规划：QPS、限流、集群配制、资源规格等
5. 扩展性规划：根据后续项目的迭代计划，要预留哪些扩展考虑哪些问题
6. 上线规划：新老版本兼容问题、灰度计划、试点计划等
7. 事故恢复：如何保障异常出现后恢复系统和数据，要求第一层兜底

以上为架构层面主要考虑的内容举例，可以根据实际情况补充。如不需要相关设计标不需要相关设计即可，但**必须标注以示思考过相关层面问题**。

#### 设计层面

1. 从**需求角度**用技术语言简要说明需求和实现的大体逻辑
2. 从**系统角度**说明要新增/修改哪些系统的哪些功能
3. 从**接口角度**说明要新增/修改哪些服务的哪些接口
   - 外部接口
     - 修改出入参必须在文档中说明
     - 考虑兼容性和是否影响上线
   - 内部接口
     - 考虑历史数据的兼容性
4. 从**数据角度**说明涉及数据的来源、数据量大小、数据一致性等方面情况
   - 提供生产数据量和未来数据量变化的评估，主要判断有没有性能问题
   - 考虑外部数据来源的合法性及校验流程，保证稳定性
   - 数据的来源必须要有详细的说明
5. 从**事故角度**说明异常出现后如何恢复系统和数据

#### 大体内容

**对于核心的模块或接口，需要以文字、时序图、流程图的方式做出详细设计**

文字主要说明算法步骤。
时序图主要说明一次调用的中间过程和涉及系统。
流程图主要说明业务的流程变化

### 模板

- 变更记录
  - 人员变更
  - 需求变更
- 系统架构部分
  - 项目架构
    如无修改可以连接现有文档
  - 路由架构
    如无修改可以连接现有文档
  - 安全架构
    如无修改可以连接现有文档
  - ...架构
- 变更
  - 数据库变更
  - 接口变更
  - 模型变更
- 功能详细设计
  - 功能模块 1 (张三)
    - 需求 1
      技术负责人标注：需要特殊说明的功能点和要求
    - 需求简述：
      - 功能开发逻辑：
        1. 功能层面：以文字、时序图、流程图等方式说明功能的流程步骤
        2. 系统层面：在哪几个系统上新增或修改的接口清单
        3. 数据层面：存取了哪些数据，数据怎么流转的，数据的关系，数据量大小，是否有性能问题
        4. 外部交互：是否是外部接口或三方接口，迭代扩展如何保障
    - 需求 2
      技术负责人标注：需要特殊说明的功能点和要求
    - 需求简述：
      - 功能开发逻辑：
        1. 功能层面：以文字、时序图、流程图等方式说明功能的流程步骤
        2. 系统层面：在哪几个系统上新增或修改的接口清单
        3. 数据层面：存取了哪些数据，数据怎么流转的，数据的关系，数据量大小，是否有性能问题
        4. 外部交互：是否是外部接口或三方接口，送代扩展如何保障
- 发布计划流程
  - 时间节点
  - 发布顺序
  - 回滚方案

## 详细设计方案文档

### 模板

- 变更记录
  - 人员变更
  - 需求变更
- 需求背景和目标
  - 需求背景
  - 需求目标
  - 量化指标
- 外部约束
  数据约束
  模型约束
- 潜在风险
  外部依赖风险、性能风险、安全风险、法律风险
- 相关人员
- 技术方案
  1. 调研选型
  2. 功能一
     - 外部交互：外部接口清单及涉及的参数
     - 流程步骤：文字、时序图、流程图等方式
     - 系统层面：新增或修改的接口清单
     - 数据层面：存取了哪些数据，数据怎么流转的，数据的关系
  3. 功能二
     - 外部交互：外部接口清单及涉及的参数
     - 流程步骤：文字、时序图、流程图等方式
     - 系统层面：新增或修改的接口清单
     - 数据层面：存取了哪些数据，数据怎么流转的，数据的关系
- 测试范围分析
  - 范围一
    - 关键测试点
    - 验收标准
  - 范围二
    - 关键测试点
    - 验收标准
- 评估意见
  技术负责人的意见
  组长的意见

## 架构评审文档
